# Contrast Adjustment Techniques for Low-Light Images

This project aims to compare different contrast enhancement techniques for low-light images.

## ğŸ“‹ About the Project

In low-light images, contrast is low and image quality deteriorates. This project employs three different methods to enhance image contrast:

1. **Power-Law Transformation (Gamma Correction)** - Main method
2. **CLAHE (Contrast Limited Adaptive Histogram Equalization)** - Contrast equalization method using CLAHE

3. **Adaptive Thresholding** - Detail extraction method using local thresholding

## ğŸ”§ Installation

### Requirements

To run the project, you need the following Python libraries:

```bash
pip install -r requirements.txt
```

### Required Libraries

- `opencv-python` - For image processing
- `numpy` - For numerical calculations
- `matplotlib` - For visualization

## ğŸ“ Project Structure

```
projectSC/
â”‚
â”œâ”€â”€ main.py                    # Main Python file (all functions)
â”œâ”€â”€ demo_analysis.py           # Histogram and CDF analysis plots (Mathematical analysis)
â”œâ”€â”€ requirements.txt           # required libraries
â”œâ”€â”€ README.md                  # this file
â”œâ”€â”€ dataset_info.md            # Dataset collection guide
â”‚
â”œâ”€â”€ dataset/                   # Dataset images
â”‚   â””â”€â”€ *.jpg, *.png           # Low-light images
â”‚
â””â”€â”€ results/                   # Results (automatically generated)
    â””â”€â”€ dataset_results/
        â”œâ”€â”€ power_law/         # Power-Law Transformation results
        â”œâ”€â”€ clahe/             # CLAHE results
        â”œâ”€â”€ thresholding/      # Adaptive Thresholding results
        â””â”€â”€ comparisons/       # Comparison images (original + 3 methods)
```

## ğŸš€ Usage

### 1. Create Folder Structure (First Time)

```bash
python main.py --create
```

This command creates the required directories.

### 2. Prepare Images

Add your low-light images to the `dataset/` folder

### 3. Process the Dataset

TÃ¼m gÃ¶rÃ¼ntÃ¼lere yÃ¶ntemleri uygulayÄ±n:

```bash
python main.py
```
Apply the methods to all images and plot their histograms:
```bash
python demo_analysis.py
```

This command:
- Processes all images in the `dataset/` folder
- Applies 3 methods to each image
- Saves results to the `results/dataset_results/` folder
- Creates comparison images for each input (original + 3 methods side by side)

### Single Image Processing

If you want to test on a single image:

```python
from main import (
    power_law_transformation,
    clahe_enhancement,
    thresholding_enhancement,
    load_image
)

#  Load image
image = load_image("dataset/ornek_resim.jpg")  # Adjust the file path as needed

# Apply methods
enhanced_power_law = power_law_transformation(image, gamma=0.5)
clahe_hist = clahe_enhancement(image)
enhanced_threshold = thresholding_enhancement(image, threshold_type='adaptive', C=2)
```
## ğŸ“ˆ Analysis and Histogram Evaluation

Within the scope of the project, not only image enhancement was performed, but the success of the algorithms was also validated using Histogram and CDF (Cumulative Distribution Function) analysis. The plots generated by demo_analysis.py demonstrate the following:

- Contrast Distribution: How CLAHE and Power-Law methods expand pixel values that were compressed into a narrow range (low contrast) across the histogram.

- Brightness Shift: How the histogram shifts from darker regions (left side) to brighter regions (right side).

- CDF Linearity: A more linear CDF curve after processing indicates a more balanced distribution of image information.

- Object Segmentation: Adaptive Thresholding gathers histogram values at extreme ends (black and white), clearly separating objects from the background.

## ğŸ“– Methods

### 1. Power-Law Transformation (Gamma Correction)

**Implemented by:** Enes AyaydÄ±n

**Description:**
Power-Law Transformation is a basic method used to adjust image contrast. The formula is:

```
s = c * r^Î³
```

where:
- `s`: Output pixel value
- `r`: Input pixel value
- `c`: Constant (usually 1)
- `Î³`: Gamma value

**Effect of Gamma Value:**
- `Î³ < 1`: Brightens the image (suitable for low-light images)
- `Î³ = 1`: No change
- `Î³ > 1`: Darkens the image

**In Code:**
```python
enhanced = power_law_transformation(image, gamma=0.5)
```

**Tested Gamma Values:**
- Î³ = 0.2 (brightest)
- Î³ = 0.5 (medium brightness)
- Î³ = 0.8 (slight brightness)
- Î³ = 1.0 (original)

### 2. CLAHE (Contrast Limited Adaptive Histogram Equalization)

**Implemented by:** Muhammed Enes UluÃ§

Where:
- `clipLimit`: Limits contrast amplification
- `tileGridSize`: Divides the image into small regions

**Effect of Parameters:**
- ` 2.0 < clipLimit < 4.0`: Higher values increase contrast; lower values decrease it
- ` 8,8 < tileGridSize < 16,16`: Smaller values increase local detail but may cause mosaic artifacts; larger values produce smoother, more global results


**Description:**
CLAHE divides the image into small tiles and equalizes each tileâ€™s histogram independently. This enhances contrast while limiting excessive brightness. This method is especially effective for low-light images.

**Implementation:**
- Convert the image to LAB color space
- Apply CLAHE only to the L (Lightness) channel
- Convert back to BGR color space

**In Code:**
```python
enhanced = clahe_enhancement(image)
```

### 3. Thresholding

**Implemented by:** BÃ¼ÅŸra YÄ±ldÄ±z

**Description:**
Standard thresholding methods convert images to black and white. In this project, the image is split into B, G, R (Blue, Green, Red) channels, and Adaptive Thresholding is applied independently to each channel. The results are merged, sharpening details in low-light regions while partially preserving color information.

Thresholding Types:

**Thresholding Types:**
- **Adaptive Thresholding**: Uses weighted (Gaussian) local neighborhood averages
- **Otsu's Thresholding**: Automatically determines the optimal threshold
- **Binary Thresholding**: Uses a fixed threshold value

**Implementation:**
- Apply thresholding independently to each BGR channel
- Merge the results to form a color image

**Parameters:**
- `threshold_type`: 'adaptive', 'otsu', veya 'binary' (default: 'adaptive')
- `C`: Adaptive threshold iÃ§in sabit deÄŸer (varsayÄ±lan: 2)
*(Note: block_size and max_value are fixed in the code for optimal results.)*

**In Code:**
```python
enhanced_threshold = thresholding_enhancement(image, threshold_type='adaptive', C=2)
```
| Method                       | Advantages                                                                                     | Disadvantages |
|------------------------------|------------------------------------------------------------------------------------------------|---------------|
| **Power-Law Transformation** | Simple and fast, easy parameter control, allows fine tuning via the gamma value               | Global operation; may not preserve local details |
| **CLAHE**                    | Enhances local contrast, reveals details well in low-light conditions, limits noise increase | Requires parameter tuning (clipLimit, tileGridSize); small tileGridSize may cause mosaic artifacts |
| **Thresholding**             | Fully adapts to changes in shadow and illumination, produces very sharp edges and boundaries | Color information is lost; produces only black-and-white output; suitable for edge detection; fast and adaptive |


## ğŸ“Š Results

### Dataset Processing Results

When `main.py` is executed:

1. **Separate folders for each method:**
   - `results/dataset_results/power_law/` â€“ Power-Law Transformation results
   - `results/dataset_results/clahe/` â€“ CLAHE results
   - `results/dataset_results/thresholding/` â€“ Adaptive Thresholding results

2. **Comparison images:**
   - `results/dataset_results/comparisons/` â€“ Original image + 3 methods side by side for each image

### Sample Output

For each image, a 4-panel comparison image:
- Left: Original image
- Right: Power-Law Transformation (Î³ = 0.5)
- Right: CLAHE Enhancement
- Right: Adaptive Thresholding

## ğŸ“¸ Dataset

The project uses a dataset consisting of low-light images. For dataset collection guidelines, refer to the `dataset_info.md` file.

**Recommended Dataset:**
- 10â€“30 low-light images
- Different scenarios (night, indoor, shadowed areas)
- Different content types (portrait, nature, city, indoor scenes)


## ğŸ“ File Descriptions

- **main.py**: Main file containing all contrast enhancement functions and dataset processing code
- **requirements.txt**: Required Python libraries
- **dataset_info.md**: Dataset collection and preparation guide
- **README.md**: This file
- **report.pdf**: Project report

## ğŸ‘¥ Contributors

- **Enes AyaydÄ±n** â€“ Power-Law Transformation implementation and project coordination
- **M. Enes Uluc** â€“ CLAHE Enhancement implementation
- **BÃ¼ÅŸra YÄ±ldÄ±z** â€“ Thresholding implementation

## ğŸ”— References

1. Gonzalez, R. C., & Woods, R. E. (2017). *Digital Image Processing* (4th ed.). Pearson.
2. OpenCV Documentation: https://docs.opencv.org/
3. Thresholding Tutorial: https://docs.opencv.org/4.x/d7/d4d/tutorial_py_thresholding.html
4. Clahe Equalization: https://docs.opencv.org/4.x/d6/db6/classcv_1_1CLAHE.html

## ğŸ“ Notes

- Image files are loaded in BGR format (OpenCV standard)
- All visualizations are displayed in RGB format (for matplotlib)
- You can adjust the gamma value according to your needs
- Different images may yield better results with different parameter settings
- Use the `python main.py` command for dataset processing

## ğŸ“„ License

This project is for educational purposes only.

---

**Good luck with your work! ğŸš€**
